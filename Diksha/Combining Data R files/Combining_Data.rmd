---
title: "Untitled"
author: "Diksha"
date: "2025-11-09"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r Working Directory}

# To get  working directory
getwd()
# To set the  working directory 
setwd()
#Alternatively use if setwd() is not working 
#knitr::opts_knit$set(root.dir = "")


```

#Loading R packages
```{r}

library(tidyverse)

```


```{r}


# Set your folder path containing the files
# eg. path <- "/Users/dikshapadwal/Diksha nosync/Group7/data"
path <- ""

#Get list of all files (assuming CSV; adjust pattern as needed)
files <- list.files(path, pattern = "\\.csv$", full.names = TRUE)
head(files,3)

data_list <- lapply(files, function(file) {
  df <- read.csv(file, header = FALSE, stringsAsFactors = FALSE)
  names(df) <- c("key", "value")
  df$key <- tolower(df$key) 
  df_wide <- tidyr::pivot_wider(df, names_from = key, values_from = value)
  df_wide$file <- basename(file)
  return(df_wide)
})

final_data <- bind_rows(data_list)
head(final_data,10)
dim(final_data)

data_csv <-  as.data.frame(final_data)
head(data_csv,10)

# export data into csv : this will save in the working directory 
# do getwd() or see the Working Directory chunk 

fwrite(data_csv,"Combined_data.csv")

```


#lapply:

Loops over each file in the files vector.
For each file, it runs the function defined inside { ... }.
The output is a list of data frames, one for each CSV.

#df <- read.csv(file, header = FALSE, stringsAsFactors = FALSE)

Reads the CSV file into a data frame df.
header = FALSE assumes the file does not have column names.
stringsAsFactors = FALSE keeps text as character, not factor.

#names(df) <- c("key", "value")

Renames the two columns of df to "key" and "value".
the first column is a  label/variable name and the second is the value.

#df$key <- tolower(df$key) 

to ensure that all row names are lower case
 
#df_wide <- tidyr::pivot_wider(df, names_from = key, values_from = value)

Converts the data from long format (two columns: key/value) to wide format.

names_from = key function takes unique values in the "key" column to become 
new column names.

values_from = valuefunction takes the corresponding "value" becomes the 
cell content for that new column.

After this, each CSV will have one row and multiple columns corresponding to 
all the keys.

#df_wide$file <- basename(file)
Adds a new column "file" that stores the filename of the CSV.
basename(file) strips the folder path and keeps just the filename.

